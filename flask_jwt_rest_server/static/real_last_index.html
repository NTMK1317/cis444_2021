<!DOCTYPE html>
<html>
    <head>
	     <script src="https://code.jquery.com/jquery-3.6.0.js" 
		     integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
	     <script src="/static/final_cis444.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="/static/styles.css">
    </head>
    <body>

	<script>
/*		$.getJSON( "/open_api/books", function( books ) {
                arrbooks = books.books;

                for(var i = 0; i < arrbooks.length; i++) {
                        bk = arrbooks[i][0];
                        bkname = "Title: " + arrbooks[i][1] + " ---------------------- Price: $" + arrbooks[i][2] + ".";
			$('#db_books').append('<option value="' + bk + '">' + bkname + '</option>');
                }

                }).fail(function( jqxhr, textStatus, error ) {
                                var err = textStatus + ", " + error;
                        console.log( "Request Failed: " + err );
                });
*/
setInterval(function(){
	
	$.getJSON( "/open_api/everymessage", function( filled ) {
        	        arrmessages = filled.filled;

			if(arrmessages === false){
			}else{
				$('#selectbox').empty();
				for(var i = 0; i < arrmessages.length; i++){
					u_mess = "- " + arrmessages[i][0] + ": " + arrmessages[i][1] + "";
					$('#selectbox').append('<option value="' + i + '">' + u_mess + '</option>');
					$('#selectbox').append('<option value="' + i + '"> </option>');
				}
				$('#selectbox').find("option:last").remove()
			}

                	}).fail(function( jqxhr, textStatus, error ) {
                                	var err = textStatus + ", " + error;
                        	console.log( "Request Failed: " + err );
                	});
}, 500);

function openForm() {
  document.getElementById("myForm").style.display = "block";
}

function closeForm() {
  document.getElementById("myForm").style.display = "none";
}

	</script>
<button class="open-button" id="chatbttn" onclick="openForm()">Chat</button>

<div class="chat-popup" id="myForm">
  <form class="form-container">
    <h1>Chat</h1>

    <label for="msg"><b>Message</b></label>
    <input type="text"  id= "msg" placeholder="Type message.." size="63" name="msg" autocomplete="off" required>

    <button type="submit" class="btn" onclick="return send_msg();">Send</button>
    <button type="button" class="btn cancel" onclick="closeForm()">Close</button>
  </form>
</div>

            <div id="login">
		<h1>SIGN IN</h1>
	    	<form >
  			<label for="in_name">Username:</label><br>
  				<input type="text" id="in_name" name="in_name" value=""><br>
  			<label for="in_word">Password:</label><br>
  				<input type="password" id="in_word" name="in_word" value=""><br><br>
  			<input type="submit" value="Sign In" onclick="return send_form();">
		</form>
	    </div>

	    <div id="signup">
                <h1>SIGN UP</h1>
                <form >
                        <label for="up_name">Username:</label><br>
                                <input type="text" id="up_name" name="up_name" autocomplete="off" value=""><br>
                        <label for="up_word">Password:</label><br>
                                <input type="password" id="up_word" name="up_word" value=""><br><br>
                        <input type="submit" value="Sign Up" onclick="return send_up();">
                </form>
            </div>

	    <div id="success" style="display:none">
		    <h3>A new User has been created.</h3> 
	    </div>

	    <div id="fail" style="display:none">
		    <h3>Incorrect input.</h3>
	    </div>

	    <div id="invalid" style="display:none">
		    <h3>Invalid username or password.</h3>
	    </div>

	    <div id="thanks" style="display:none">
		    <h1>Thank you for your purchase.<br>Reload page to start again.</h1>
	    </div>

	   <!-- <div id="books" style="display:none">
		    <h1>Choose a Book to buyyyyyyyyyyy.</h1>
		    <select name="db_books" id="db_books">

  		    </select>
		    <input type="submit" value="Select" onclick="return buy_book();">
	    </div>
	   -->
	    <div id="divchatbox" style="display:none">
		    <select name="selectbox" size="50"  id="selectbox" style="width:840px;overflow-x: auto;">
			    <optgroup>
			    </optgroup>
		    </select>
	    </div>

	    <div id="mydiv" style"color:black">
	    </div>
    </body>
</html>

